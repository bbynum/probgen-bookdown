# The Complement, Addition, and Multiplication Principles {#complement_addition_multiplication_principles}

```{r, message=FALSE, warning=FALSE, echo=FALSE}
library(mosaic)
set.seed(2018)
```


## Introduction {#introduction}

Most of the interesting probability questions involve combinations of simple events. In this section we examine the probabilities of two events both occurring (**and**), at least one of two events occurring (**or**), as well as an event not occurring (**not**). In this chapter,  we describe the key probability principles related to **and**, **or**, and **not** statements, namely, the Multiplication Principle, Addition Principle, and Complement Principle, respectively. 


## Chapter Scenario - The Birthday Problem {#chapter_scenario_birthday_problem}

You may be sitting in a classroom right now. If not, imagine you are. Suppose there are a total of 20 people in class. What is the chance that two of you have the same birthday (meaning same day of the year but not necessarily the same year)? Which is it closer to - a 10%, 20%, 30%, 40%, or 50% chance, or possibly even higher chance?

## Working with **AND** and **NOT**

## The Chevalier de Mere

Aaah, the “Horseman of the Sea,” that famous gambler who had a horse and lived by the sea.  And who was, by the way, an acquaintance of Pascal, owner of famous triangle in the year 1654.  There were two games of chance that the Chevalier wanted some advice on and he wrote Pascal and letter and, viola, the theory of probability was born.  OK, it wasn’t that simple but the Chevalier’s question did stimulate a deeper understanding of probability intimating at what we now call the multiplication rule and the complement rule. Here are the two games under consideration -

Game One:	You could bet on the chance of getting at least one six on four rolls of a die.

Game Two:	For a longer game, you could bet on the chance of getting at least one double six on 24 rolls of two dice.

### Practice Exercise
Estimate the probability of winning Game One and the probability of winning Game Two. No formal computation necessary at this point.
<br/>
<br/>
Each of these games was an even-money game meaning the payoff ratio was 1:1 where you would either win or lose the exact amount bet. The Chevalier de Mere had a lot of experience and felt that the first game offered a better chance of winning than the second game but he could find no theoretical explanation as to why. In his mind, with the prevailing math at the time, the two games seemed comparable. If I am given 4 tries to get something that happens on average every 6 times then being given 24 tries at something that happens on average every 36 times should be comparable. But in reality it was not. In short, his mathematical reasoning was letting him down.

We can use simulation to recreate the Chevalier's experience. The code below simulates 10,000 trials of Game One and documents the number of wins and losses.

```{r nice-tab-32, tidy=FALSE}
die_tosses <- matrix(sample(1:6, 4*10000, replace=TRUE), ncol=4) #generate die tosses
sixes_logic <- die_tosses==6 #identify where there are sixes (TRUE=1, FALSE=0)
number_of_sixes <- apply(sixes_logic, 1, sum) #Tabulate the number of sixes in each game
game_one_winners <- number_of_sixes > 0 #Identify the winners - those with at least one six

 #Calculate the proportion of game one winners
knitr::kable(
  prop.table(table(game_one_winners)), caption = 'Game One Simulation',
  booktabs = TRUE
)
```

The simulated Chevalier in this simulation would notice winning $51.39\%$ of the time. Let's simulate 10,000 trials of Game Two for comparison sake.

```{r nice-tab-33, tidy=FALSE}

two_Die_tosses <- matrix(sample(1:6, 24*10000, replace=TRUE) + 
    sample(1:6, 24*10000, replace=TRUE), ncol=24) #generate 10000 trials of 24 two dice rolls
double_sixes_logic <- two_Die_tosses==12 #identify double sixes (TRUE=1, FALSE=0)
#head(double_sixes_logic, n=10) 
number_of_double_sixes <- apply(double_sixes_logic, 1, sum) #tabulate number of double sixes in each game
game_two_winners <- number_of_double_sixes > 0 #identify winners - those with at least one double six

#Calculate the proportion of game two winners
knitr::kable(
  prop.table(table(game_two_winners)), caption = 'Game Two Simulation',
  booktabs = TRUE
)
```

This time, our simulated Chevalier sees he is winning only $49.04\%$ of the time. Hence the rub. Why is Game One better than Game Two?  

Enter Pascal, stage right.  Here we let you do a little play-acting and audition for the role of Pascal by analyzing the games and determining the chances of winning each. To do this, let’s explore what we now call the multiplication rule and the complement rule.

The Multiplication Rule shows us that to obtain the probability of two potentially consecutive events we multiply related probabilities:

### Theorem: The Multiplication Principle
$$For \ all \ events \ A \ and \ B, \ P(A \ and \ B)= P(A) \cdot P(B \mid A).$$

To understand the multiplication principle, examine the tree diagram below where branches are labeled with the events and the corresponding probabilities. We see that traveling the **A and B** branch happens with probability $P(A) \cdot P(B \mid A)$.

In the special case that events A and B are independent we note that $P(B \mid A) = P(B)$ resulting in the simplified tree diagram below.

This leads to a special case of the multiplication principle. 

### Theorem: Special Case of the Multiplication Principle
$$If \ the \ events \ A \ and \ B \ are \ independent \ then \ P(A \ and \ B) = P(A) \cdot P(B).$$

The Complement Rule confirms that the probability of an event occurring is one minus the probability the event does not occur:

### Theorem: Complement Principle

$$For \ all \ events \ A, \ P(A)= 1-P(not \ A)$$			

Remember this can also be written as $P(A) + P(not \ A) = 1$.

Tackling the Chevalier's problem one die at a time, consider the experiment of tossing just one die. Suppose we are interested in the event S of getting a six.

$$P(getting \ a \ six) = P(S) = 1/6$$

This is equivalent to the following version using the complement principle:

$$P(getting \ a \ six) = 1 – P(not \ getting \ a \ six) = 1 - P(not \ S) = 1 – 5/6 = 1/6$$

Now consider the experiment of tossing two dice. Let $S_{1}$ represent getting a six on the first die and $S_{2}$ getting a six on the second die. Note that whatever happens on the first die is independent of what happens on the second die. To find the probability of getting double sixes we can utilize the multiplication rule.

$$P(two \ sixes)= P(S_{1} \ and \ S_{2})=P(S_{1}) \cdot (S_{2})=  1/6 \cdot 1/6=1/36$$

There is a note of caution here; remember this technique only works with independent events like dice rolls and would not work for dependent event like drawing from an urn without replacement.

Similarly, we could now use independence and the Multiplication Rule to help us understand the event of not getting a six.

$$P(no \ sixes)= P(S_{1}^{c} \ and \ S_{2}^{c}) = P(S_{1}^{c}) \cdot P(S_{2}^{c}) =5/6 \cdot 5/6=25/36$$
	
We often use the complement rule when finding the probability of at least one occurrence of an event in multiple trials. To say “at least one success” and to say “no successes” are complements of each other. We can take advantage of this because it is often easy to find the probability of “no successes” directly. 

To illustrate, we can use the complement rule as one way of finding the probability at least one of the two dice is a six.

$$P(at \ least \ one \ six)= 1-P(no \ sixes)= 1-5/6 \cdot 5/6=1-25/36=11/36$$

Let’s put these pieces together – the Multiplication Rule and the Complement Rule – to solve the Chevalier de Mere’s dilemma first analyzing Game One then Game Two then making comparisons.

## Analysing Game One
The gambler bets on the chance of getting at least one six on four rolls of a die and if a six occurs wins the amount bet and if it does not occur then loses the amount bet.

Consider drawing a tree diagram for four tosses of the die including the probabilities along each branch. For each toss of the die we need only identify two branches – NOT SIX (1,2,3,4 or 5) or SIX (6). You can stop the branch whenever a six occurs since the gambler wins in this instance.

The tree diagram for four tosses of a die considering the two outcomes of success or failure of getting a six on each toss generates sixteen branches through the tree but only five branches if we terminate the tree whenever we get a success. These branches are not equally likely, though, so we need to be careful about calculating probabilities. When finding the probability of at least one success in an experiment like this we often utilize the Complement Rule because while there are many branches that end in a success there is only one branch of all failures so this one would be easier to calculate the probability of than adding together the other branches. 

Examine the tree diagram above and identify the one branch in the sample space in which the gambler loses by shading it and find the probability of this occurrence.

$$P(no \ sixes \ in \ four \ tosses)=P(S_{1}^{c} \ and \ S_{2}^{c} \ and \ S_{3}^{c} \ and \ S_{4}^{c}) = \\ P(S_{1}^{c}) \cdot P(S_{2}^{c}) \cdot P(S_{3}^{c}) \cdot P(S_{4}^{c})=(5/6)^{4}$$
Thus, by the Complement Principle,

$$P(at \ least \ one \ six \ in \ four \ tosses) = 1 - P(no \ sixes \ in \ four \ tosses) = \\ 1 - (5/6)^{4}$$

### Practice Exercise
Are the probabilities you have found for losing or winning Game One consistent with the Chevalier de Mere’s observation that he found Game One to be a favorable game? Explain.

## Analyzing Game Two {#analyzing_game_two}
Recall, in this game the gambler rolls a pair of dice and has 24 chances to obtain double-six winning the amount bet if she does and losing the bet if she does not obtain a double-six in 24 rolls. The Chevalier did not like this game as much. We analyze the game here to see if his lack of enthusiasm is justified.

Consider what a tree diagram would look like for this game. If we let event $D_{i}$ represent getting a double six on the $i^{th}$ roll of the dice and $N_{i}$ represent its complement we can stop the branching as a win whenever we hit a double six. Examine

Would it be realistic to use this tree diagram to assist us find the probability of a win? The main issue is there are so many ways to win - on the first toss, the second toss,..., the 24th toss. Who wants to add up 24 separate probabilities? Maybe the complement principle can help us since there is only one way to lose - never get a double six in all 24 tosses. Follow the chain of reasoning:

$$P(win) = 1 - P(lose) = 1 -P(no \ sixes \ in \ 24 \ rolls) = 1 - P(N_{1} \ and \ N_{2} \ and \ ... \ N_{24}) = \\ 1 - P(N_{1}) \cdot P(N_{2}) \cdot ... \cdot P(N_{24}) = 1 - (35/36)^{24}$$

We are using the fact that the different tosses of the dice are all independent. 


### Practice 
Compare the probabilities of winning and losing Game One with the probabilities of winning and losing Game Two and whether the opinions of the Chevalier de Mere’s games obtained through the simulation in R are consistent with the theoretical conclusions of our probability analysis.

## Revisiting the Chapter Scenario - The Birthday Problem

Given 365 days of the year (We ignore Leap Day February 29 with apologies to the Pirate of Penzance) and only 20 people it may initially feel like there is not much chance of a match but we are being deceived. With our problem-solving tools of the Multiplication and Complement Principles, we can find out for sure.

Recall The Multiplication Rule shows us that to obtain the probability of two potentially consecutive events we multiply related probabilities:

	$$P(A \ and \ B)= P(A) \cdot P(B \ \mid \ A)$$
	If the events A and B are independent then $P(A \ and \ B)=P(A) \cdot P(B)$.

The Complement Rule confirms that the probability of an event occurring is one minus the probability the event does not occur:

$$P(A)= 1-P(not \ A)$$
Remember, this can also be written $P(A)=1-P(not \ A)$.

We will build up our way into solving this problem by imagining that individuals walk into the room one at a time and announce their birthday to see if it matches or not with anyone else who is in the room.

When the first person walks in the room, there is no one else there so their birthday can be any one of the 365 days without there being a match so the probability of no match is $365/365=1$. Suppose only this one person is in the room. The probability that the second person to enter the room has the different birthday is $364/365$.

Suppose that two people are in the room and do not have the same birthday. The probability that the third person to enter the room has a different birthday than these two is $363/365$. 

Now, suppose three people are in the room and do not have a birthday match. Then the probabillity that the fourth person to enter the room has a different birthday than these three is $362/365$.

For all of these events to occur we can use the multiplication principle. With four people the probability of no match is $(365/365) \cdot (364/365) \cdot (363/365) \cdot (362/365)$

Using the complement principle for this case with four people

$$P(match)=1-P(no \ match)=1-(365/365) \cdot (364/365) \cdot (363/365) \cdot (362/365)$$

###Practice
Extend this thinking to find the probability of no match with five people.

We want to describe the solution in general for any number of people n. A computational shortcut will help. 

Given n people, the probability of a birthday match is 

$$P(match)=1-P(no \ match)=1-\frac{365 \cdot 364 \cdot 363 \cdot ... \cdot (365-n+1)}{3655^{n}}= \\ 1-\frac{P(365,n)}{365^{n}}$$

where $P(365,n)$ represents the permutation of 365 days taken n at a time. We will discuss this in more detail in a later chapter.

To solve the Chapter Scenario problem, we let $n=20$ and see

$$P(match)=1-P(no \ match)=1-\frac{P(365,20)}{365^{20}}$$ 

We can use the `prod()` function in R for the computation.

```{r}
match_prob_20 <- 1- prod(1 - (0:19)/365)
match_prob_20
```

So the probability of a birthday match with 20 people is `r match_prob_20` which might surprise us.

### Exercise - Birthday Problem continued
Continue in like fashion finding the probability of a birthday match with 21, 22, 23, etc. people until you find the first value of n for which this probability is greater than 0.5.
        

### Exercise 
Suppose that a fair coin is flipped five times. What is the probability there is at least one head? 

## OR and the Addition Principle {#or_and_the_addition_principle}

## Chapter Scenario - Paying Taxes {#chapter_scenario_paying_taxes}

On the Diane Rehm show on Wednesday, September 28, 2016 a discussion of federal taxes occurred. Here is the link to the show: https://thedianerehmshow.org/. 

A claim something like the following was made: 55% of individuals pay federal income tax, 70% pay payroll taxes, and 80% pay at least one of the two. Can you determine the percentage of individuals that pay federal income tax but not payroll taxes and the percentage who pay payroll taxes but not federal income tax?

## Class Composition Example

Suppose we took a poll of all 25 students in class and asked them to identify whether or not they were from Utah and whether or not they are planning to major in a business-related field with the following results:

* 13 are from Utah
* 8 plan to major in a business-related field
* 5 are from Utah AND plan to major in a business-related field

If one student is chosen at random what is the probability they are from Utah OR plan to major in a business-related field?

Let's let U represent the event of being from Utah and B the event of planning to major in a buisness-related field.

### Practice Exercise
What is wrong with the following approach?

$$P(U \ or \ B) = P(U)+P(B)= 13/25 + 8/25 = 21/25 \ WRONG!!!$$

You may have spotted the mistake that some individuals have been double-counted. The Addition Principle will take care of this.

$$P(U \ or \ B) = P(U)+P(B)-P(U \ and \ B) = 13/25 + 8/25 - 5/25 = 16/25$$

From the information above we can determine there are 9 individuals that are not from Utah and not planning on majoring in business-related field. Venn Diagrams are a helpful way to visualize the relationships between overlapping events like these. Examine the Venn diagram below illustrating the probability within each region.


Two overlapping events may be represented in a Venn diagram with two overlapping circles. Think of the rectangle containing them as the entire sample space.

Examine the three Venn diagrams below. The first Venn diagram illustrates the compound event each region represents. The second Venn diagram identifies the number of individuals in each region. The third Venn diagram identifies the proportion of the population in each region, or, equivalently, the probability of selecting an individual in the given region if one person was chosen at random. 

## Venn Diagrams for Three Events

A Venn diagram for three overlapping events is represented with three overlapping circles creating the eight regions all labeled in the diagram below. By the Fundamental Principle of Counting, to identify a region there are two choices for each event - out or in - leading to $2^{3}=8$ total regions. 

## Example - Watching Sports
A group of students was asked whether or not they like to watch basketball, soccer, and/or football. Here are the results of the survey.

* Total number surveyed: 78
* Number choosing basketball: 26
* Number choosing soccer: 30
* Number choosing football: 36
* Number choosing both basketball and soccer: 10
* Number choosing both basketball and football: 12
* Number choosing both soccer and football: 18
* Number choosing basketball and soccer and football: 8

We can draw a Venn Diagram by identifying with regions B for basketball, S for soccer, F for football, and T representing the total number surveyed. We want to determine how many individuals there are in each of the eight regions. As in the example with two overlapping events, the key problem-solving strategy is to start with the overlap. 

## Revisiting the Chapter Scenario - Paying Taxes {#revisit_chapter_scenario}

Remember in our example, 55% of individuals pay federal income tax, 70% pay payroll taxes, and 80% pay at least one of the two and we wish to determine the percentage of individuals that pay federal income tax but not payroll taxes and the percentage who pay payroll taxes but not federal income tax. A Venn diagram can help with F representing federal income tax and P payroll taxes.

From the Addition Principle, 

$$P(F \ or \ P)=P(F)+P(P)-P(F \ and \ P)$$
We know three of these quantities which may be substituted in.

$$0.80=0.55+0.70-P(F \ and \ P)$$

Solving we find $P(F \ and \ P)=0.55 + 0.70 - 0.80=0.45$ allowing us to complete the Venn diagram.







## Exercises {#exercises}

### Exercise - Venn for Four
Create a Venn diagram template for four events {A, B, C, D} and accurately label each region.

### Exercise - Class Schedules
Suppose that a group of 100 first year students were given a survey indicating that 58 of them are registered for a math class and 40 of them are registered for a foreign language class. Can we safely assume that 98 of them are registered for either a math class or a foreign language class? Suppose we are told that 22 of them are registered for both a math class and a foreign language class, then determine how many are registered for a math class or a foreign language class.

### Exercise - Class Survey
Design and administer a short three-question class survey where each question is a yes or no answer and draw a Venn diagram of the results identifying the number of individuals in each of the eight regions. Questions could relate to almost anything but try to select questions where you will see different responses.










